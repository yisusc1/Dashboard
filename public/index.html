<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Gesti√≥n de Operaciones</title>
    <link rel="stylesheet" href="/styles/enhanced-style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <nav class="navbar">
        <div class="navbar-content">
            <div class="logo">
                <i class="fas fa-chart-line"></i>
                Sistema de Gesti√≥n de Operaciones
            </div>
            <div class="nav-links">
                <span style="color: var(--text-secondary); font-size: 0.9rem;">Panel Principal</span>
            </div>
        </div>
    </nav>

    <div class="menu-container">
        <h1>Bienvenido al Sistema</h1>
        <p>Selecciona el m√≥dulo al que deseas acceder seg√∫n tu rol en la empresa</p>

        <div class="stats-grid">
            <div class="stat-card stat-blue">
                <div class="stat-number" id="stats-pendientes">--</div>
                <div class="stat-label">Solicitudes Pendientes</div>
            </div>
            <div class="stat-card stat-green">
                <div class="stat-number" id="stats-en-proceso">--</div>
                <div class="stat-label">En Proceso</div>
            </div>
            <div class="stat-card stat-orange">
                <div class="stat-number" id="stats-instalaciones">--</div>
                <div class="stat-label">Instalaciones Hoy</div>
            </div>
            <div class="stat-card stat-purple">
                <div class="stat-number" id="stats-soportes">--</div>
                <div class="stat-label">Soportes Activos</div>
            </div>
        </div>

        <div class="menu-options">
            <a href="/solicitud" class="menu-card">
                <div class="card-header">
                    <div class="card-icon icon-blue">
                        <i class="fas fa-user-plus"></i>
                    </div>
                    <div class="card-info">
                        <h2>Nueva Solicitud</h2>
                        <small>Asesores de Ventas</small>
                    </div>
                </div>
                <p>Registrar solicitudes de nuevos clientes con todos los datos necesarios para la instalaci√≥n.</p>
            </a>

            <a href="/admin" class="menu-card">
                <div class="card-header">
                    <div class="card-icon icon-green">
                        <i class="fas fa-tasks"></i>
                    </div>
                    <div class="card-info">
                        <h2>Panel de Administraci√≥n</h2>
                        <small>Planificadores</small>
                    </div>
                </div>
                <p>Gestionar solicitudes pendientes y asignar equipos t√©cnicos usando el tablero Kanban.</p>
            </a>

            <a href="/reporte" class="menu-card">
                <div class="card-header">
                    <div class="card-icon icon-orange">
                        <i class="fas fa-tools"></i>
                    </div>
                    <div class="card-info">
                        <h2>Reporte de Instalaci√≥n</h2>
                        <small>T√©cnicos de Instalaci√≥n</small>
                    </div>
                </div>
                <p>Registrar detalles t√©cnicos de instalaciones completadas con datos de equipos y mediciones.</p>
            </a>

            <a href="/soporte" class="menu-card">
                <div class="card-header">
                    <div class="card-icon icon-red">
                        <i class="fas fa-headset"></i>
                    </div>
                    <div class="card-info">
                        <h2>Reporte de Soporte</h2>
                        <small>T√©cnicos de Soporte</small>
                    </div>
                </div>
                <p>Documentar visitas de soporte t√©cnico y soluciones implementadas para clientes.</p>
            </a>

            <a href="/factibilidad" class="menu-card">
                <div class="card-header">
                    <div class="card-icon icon-purple">
                        <span style="font-size: 1.5em;">üó∫Ô∏è</span>
                    </div>
                    <div class="card-info">
                        <h2>An√°lisis de Factibilidad</h2>
                        <small>Ventas y Planificaci√≥n</small>
                    </div>
                </div>
                <p>Verificar la disponibilidad del servicio en la ubicaci√≥n de un cliente usando el mapa interactivo.</p>
            </a>
            </div>

        <div class="info-section">
            <h3>
                <i class="fas fa-info-circle"></i>
                Informaci√≥n del Sistema
            </h3>
            <div class="info-grid">
                <div class="info-item">
                    <h4>üîê Acceso Seguro</h4>
                    <p>Cada m√≥dulo cuenta con autenticaci√≥n por contrase√±a para proteger la informaci√≥n sensible.</p>
                </div>
                <div class="info-item">
                    <h4>üì± Optimizado para M√≥viles</h4>
                    <p>Los formularios est√°n dise√±ados para funcionar perfectamente en dispositivos m√≥viles.</p>
                </div>
                <div class="info-item">
                    <h4>üó∫Ô∏è Geolocalizaci√≥n</h4>
                    <p>Captura autom√°tica de coordenadas GPS para ubicaciones precisas.</p>
                </div>
                <div class="info-item">
                    <h4>üí¨ Integraci√≥n WhatsApp</h4>
                    <p>Env√≠o autom√°tico de reportes formateados a trav√©s de WhatsApp.</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Funci√≥n para cargar las estad√≠sticas desde la API
        async function loadStats() {
            try {
                const response = await fetch('/api/stats');
                if (!response.ok) {
                    throw new Error('Error al cargar los datos');
                }
                const stats = await response.json();

                // Actualizar los n√∫meros en las tarjetas
                document.getElementById('stats-pendientes').textContent = stats.pendientes;
                document.getElementById('stats-en-proceso').textContent = stats.enProceso;
                document.getElementById('stats-instalaciones').textContent = stats.instalacionesHoy;
                document.getElementById('stats-soportes').textContent = stats.soportesActivos;

            } catch (error) {
                console.error("No se pudieron cargar las estad√≠sticas:", error);
                // Si hay un error, dejamos los valores por defecto o mostramos un error
                document.getElementById('stats-pendientes').textContent = 'X';
                document.getElementById('stats-en-proceso').textContent = 'X';
                document.getElementById('stats-instalaciones').textContent = 'X';
                document.getElementById('stats-soportes').textContent = 'X';
            }
        }

        // Event listener para ejecutar todo cuando el DOM est√© listo
        document.addEventListener('DOMContentLoaded', () => {
            // Cargar las estad√≠sticas
            loadStats();

            // Animaci√≥n de entrada para las tarjetas
            const cards = document.querySelectorAll('.menu-card, .stat-card');
            cards.forEach((card, index) => {
                card.style.opacity = '0';
                card.style.transform = 'translateY(20px)';
                setTimeout(() => {
                    card.style.transition = 'all 0.5s ease';
                    card.style.opacity = '1';
                    card.style.transform = 'translateY(0)';
                }, index * 100);
            });
        });
    </script>
</body>
</html>